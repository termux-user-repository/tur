--- a/codex-rs/windows-sandbox-rs/Cargo.toml
+++ b/codex-rs/windows-sandbox-rs/Cargo.toml
@@ -21,7 +21,7 @@
 features = ["std", "small_rng"]
 [dependencies.dirs-next]
 version = "2.0"
-[dependencies.windows-sys]
+[target.'cfg(target_os = "windows")'.dependencies.windows-sys]
 version = "0.52"
 features = [
     "Win32_Foundation",
