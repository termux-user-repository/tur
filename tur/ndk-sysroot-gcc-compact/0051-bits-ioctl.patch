--- a/toolchains/llvm/prebuilt/linux-x86_64/sysroot/usr/include/bits/ioctl.h
+++ b/toolchains/llvm/prebuilt/linux-x86_64/sysroot/usr/include/bits/ioctl.h
@@ -55,7 +55,8 @@
  * - defining BIONIC_IOCTL_NO_SIGNEDNESS_OVERLOAD, which will make the
  *   overloading go away.
  */
-#if !defined(BIONIC_IOCTL_NO_SIGNEDNESS_OVERLOAD)
+#if defined(__clang__) && __has_extension(overloadable_unmarked) && \
+  !defined(BIONIC_IOCTL_NO_SIGNEDNESS_OVERLOAD)
 /* enable_if(1) just exists to break overloading ties. */
 int ioctl(int __fd, unsigned __op, ...) __overloadable __enable_if(1, "") __RENAME(ioctl);
 #endif
